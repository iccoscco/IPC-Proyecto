{% extends "base.html" %}

{% block title %}Editar Pedidos{% endblock %}

{% block content %}
<div class="form-container">
    <h1>Gestión de Pedidos</h1>
    <table class="tabla-edicion">
        <thead>
            <tr>
                <th>ID</th>
                <th>Usuario</th>
                <th>Estado</th>
                <th>Origen</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for pedido in pedidos %}
            <tr>
                <form method="POST" action="{{ url_for('actualizar_pedido', id=pedido.id) }}">
                    <td>{{ pedido.id }}</td>

                    <td>
                        <select name="id_usuario" required>
                            {% for usuario in usuarios %}
                                <option value="{{ usuario.id }}" {% if usuario.id == pedido.id_usuario %}selected{% endif %}>
                                    {{ usuario.nombre }}
                                </option>
                            {% endfor %}
                        </select>
                    </td>

                    <td>
                        <select name="estado" required>
                            <option value="pendiente" {% if pedido.estado == 'pendiente' %}selected{% endif %}>Pendiente</option>
                            <option value="en cocina" {% if pedido.estado == 'en cocina' %}selected{% endif %}>En cocina</option>
                            <option value="servido" {% if pedido.estado == 'servido' %}selected{% endif %}>Servido</option>
                            <option value="cancelado" {% if pedido.estado == 'cancelado' %}selected{% endif %}>Cancelado</option>
                        </select>
                    </td>

                    <td>
                        <select name="origen" required>
                            <option value="voz" {% if pedido.origen == 'voz' %}selected{% endif %}>Voz</option>
                            <option value="tactil" {% if pedido.origen == 'tactil' %}selected{% endif %}>Táctil</option>
                        </select>
                    </td>

                    <td>
                        <button type="submit" class="boton-editar">Actualizar</button>
                        <a href="{{ url_for('eliminar_pedido', id=pedido.id) }}" class="boton-eliminar"
                           onclick="return confirm('¿Seguro que quieres eliminar este pedido?');">Eliminar</a>
                    </td>
                </form>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}


