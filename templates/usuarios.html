{% extends "base.html" %}

{% block title %}Agregar Usuario{% endblock %}

{% block content %}
<div class="form-container">
    <h1>Nuevo Usuario</h1>
    <form method="POST" action="/guardar_usuario">
        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" name="nombre" required>

        <label for="correo">Correo:</label>
        <input type="email" id="correo" name="correo" required>

        <label for="rol">Rol:</label>
        <select id="rol" name="id_rol" required>
            {% for rol in roles %}
                <option value="{{ rol.id }}">{{ rol.nombre }}</option>
            {% endfor %}
        </select>

        <button type="submit">Guardar</button>
    </form>
</div>

<input type="hidden" id="usuario_id" value="{{ usuario_id }}">

<div style="margin-top: 20px;">
  <h3>Avatar actual:</h3>
  <div id="avatar-container">
    {% if avatar_svg %}
      {{ avatar_svg | safe }}
    {% else %}
      <!-- AquÃ­ puede ir un mensaje o nada -->
      <p>No hay avatar disponible.</p>
    {% endif %}
  </div>
</div>

<!-- Boton para iniciar el automata -->
<div id="ui" style="margin-bottom:10px;">
    <button type="button" onclick="iniciarAutomata()">ğŸ—£ Iniciar registro por voz</button>
</div>

<div style="display: flex; gap: 20px;">
    <!-- Chat principal -->
    <div style="flex: 1; border: 1px solid #ccc; padding: 10px;">
      <h3>ğŸ—£ï¸ ConversaciÃ³n</h3>
      <div id="chat" style="height: 300px; overflow-y: auto;"></div>
    </div>
  
    <!-- Chat tÃ©cnico -->
    <div style="flex: 1; border: 1px solid #aaa; padding: 10px; background-color: #f9f9f9;">
      <h3>ğŸ§ª DepuraciÃ³n</h3>
      <div id="debug" style="height: 300px; overflow-y: auto; font-size: 0.9em; color: #333;"></div>
    </div>
</div>
  
<script src="{{ url_for('static', filename='js/funciones.js') }}"></script>
{% endblock %}
