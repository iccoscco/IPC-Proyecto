{% extends "base.html" %}

{% block title %}Gestionar avatar{% endblock %}

{% block content %}

<h2>Editor de Avatar</h2>

<div id="ui" style="margin-bottom:10px;">
  <label>Piel: <input type="color" id="colorPiel" value="#f5cba7"/></label>
  <label>Uniforme: <input type="color" id="colorUniforme" value="#3498db"/></label>
  <label>Pelo: <input type="color" id="colorPelo" value="#2c3e50"/></label>

  <label for="eyeType">Tipo de ojos:</label>
  <select id="eyeType">
    <option value="default">Normal</option>
    <option value="side">Lateral</option>
    <option value="wink">Guiño</option>
    <option value="happy">Feliz</option>
    <option value="surprised">Sorprendido</option>
    <option value="angry">Enojado</option>
    <option value="closed">Ojos cerrados</option>
  </select>

  <label for="hairType">Tipo de cabello:</label>
  <select id="hairType">
    <option value="default">Normal</option>
    <option value="curly">Rizado</option>
    <option value="short">Corto</option>
    <option value="long">Largo</option>
    <option value="mohawk">Cresta</option>
    <option value="bun">Moño</option>
    <option value="bald">Calvo</option>
  </select>


  <input type="hidden" id="usuario_id" value="{{ usuario_id }}">

  <!-- Botones -->
  <button type="submit" id="exportSvg">Exportar SVG</button>
  <button type="submit" id="usarAvatar">Usar avatar en el sistema</button>

</div>

<div id="avatarContainer" style="width: 300px; height: 350px;">
  <svg id="avatar" width="300" height="320" viewBox="0 0 300 320" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Avatar">
    <!-- Cuello -->
    <rect x="110" y="200" width="44" height="20" fill="#f5cba7" id="neck" />
    
    <!-- Cuerpo / uniforme -->
    <path id="body" fill="#3498db" d="M 95 240 Q 105 220 119 220 Q 133 220 135 235 Q 137 220 151 220 Q 165 220 175 240 L 175 240 q 22 47 -38 48 Q 81 288 95 240 Z" />
    <path id="collar" fill="#2980b9" d="
      M119 220 
      Q127 230 135 235 
      Q143 230 151 220 
      Z" />
    <circle cx="135" cy="250" r="2" fill="white" />
    <circle cx="135" cy="265" r="2" fill="white" />
    <circle cx="135" cy="280" r="2" fill="white" />

    <!-- Brazos -->
    <!-- Brazo Izquierdo -->
    <path id="arm-left" fill="#f5cba7" d="M 279.9132 140.744 C 279.3288 140.5375 278.6177 140.5193 277.9894 140.6933 C 277.3486 140.8736 276.6333 141.3312 275.9457 141.9987 C 275.0314 142.8871 270.4405 148.1435 267.5251 151.6384 C 264.7168 155.0103 260.8705 159.8441 259.9387 161.169 C 258.8572 162.7142 258.1615 163.4582 257.452 163.8199 C 257.0096 164.0471 256.6542 164.108 256.2461 164.0257 C 255.2262 163.8158 254.6878 162.6389 254.8211 160.8846 C 254.8738 160.1527 255.2145 157.9453 255.5223 156.2872 C 256.302 152.1321 257.3745 148.2588 258.9028 144.0804 C 259.3521 142.8648 259.4803 142.4787 259.6319 141.9348 C 259.9531 140.7535 260.0345 139.7766 259.8864 138.8612 C 259.7512 137.9938 259.2649 137.0861 258.5688 136.409 C 258.3604 136.2075 258.2932 136.1597 257.8616 135.915 C 257.4557 135.6807 257.3537 135.6308 257.1504 135.5766 C 256.1767 135.3256 255.1885 135.6076 254.4725 136.3399 C 254.1873 136.6308 254.0093 136.8844 253.7157 137.432 C 253.3127 138.1691 253.0525 138.9165 252.7945 140.0666 C 251.634 145.2016 250.809 148.5368 249.6639 152.7155 C 248.8292 155.7472 247.5816 159.9705 247.2904 160.7406 C 246.7672 162.139 245.7487 162.6921 244.2981 162.3688 C 243.4554 162.18 242.5042 161.6398 241.7844 160.9491 C 240.7288 159.9337 239.7734 158.5026 239.0646 156.8709 C 238.3682 155.2646 237.9015 153.651 237.2447 150.57 C 236.5029 147.097 236.3282 146.3918 236.0424 145.7306 C 235.6602 144.8379 235.266 144.3487 234.5949 143.9251 C 234.2123 143.6817 233.9492 143.5749 233.5701 143.5049 C 233.0816 143.4213 232.5593 143.5212 232.171 143.7797 C 231.8318 144.0078 231.7004 144.1574 231.4757 144.5465 C 231.0392 145.3183 230.9029 146.2184 230.9901 147.7392 C 231.1043 149.6274 231.569 151.6818 232.4865 154.327 C 232.6765 154.8652 232.89 155.4485 233.9179 158.2071 C 234.9354 160.937 235.4713 162.7665 235.7809 164.5194 C 236.3078 167.5209 236.0177 170.3124 234.7955 173.9684 C 234.4708 174.9447 234.0448 176.0654 233.2819 177.9885 C 232.2725 180.518 231.8728 181.6088 231.4617 182.9457 C 230.5467 185.9446 230.2845 188.477 230.6474 190.8561 C 230.7575 191.5873 231.1011 192.7735 231.3665 193.3372 L 231.404 193.4129 L 230.9863 194.0739 C 228.1036 198.598 224.6443 203.5741 214.41 217.9177 C 206.3292 229.2421 203.1263 233.7663 199.2682 239.2925 C 192.2634 249.3392 186.7995 257.5061 182.4106 264.4985 C 180.6241 267.3506 179.665 268.9259 177.9899 271.7882 C 175.1933 276.5695 173.34 280.0687 171.8162 283.4424 C 171.6508 283.807 171.4966 284.16 171.4701 284.2214 L 171.4246 284.3394 L 184.7465 292.0308 C 195.3857 298.1734 198.0824 299.7213 198.1029 299.7015 C 198.1194 299.6885 198.5111 299.1975 198.9682 298.6089 C 202.2218 294.4658 205.179 290.2734 208.0038 285.8105 C 209.1719 283.959 209.6264 283.211 210.9465 280.9556 C 214.659 274.6192 217.8639 268.3416 221.5654 260.1179 C 223.4141 256.0252 224.6327 253.188 228.4572 244.1106 C 232.2558 235.086 233.7906 231.5292 235.6685 227.4173 C 238.2681 221.7193 240.275 217.6729 243.0603 212.4971 C 243.712 211.2901 246.7184 206.0751 247.3616 205.0392 L 247.7647 204.3878 L 248.1058 204.3908 C 249.0936 204.4064 250.2302 204.2191 251.3903 203.8424 C 252.2686 203.5556 253.0826 203.2317 254.6667 202.527 C 257.7718 201.1488 260.2602 200.2762 263.3749 199.4673 C 264.8932 199.0719 266.5722 198.7107 269.2282 198.1963 C 272.7638 197.5178 275.0237 197.3927 276.9053 197.7664 C 277.4693 197.8755 277.9178 198.0126 278.8892 198.3615 C 280.1909 198.8334 280.7407 198.9749 281.4154 199.0171 C 282.4055 199.0835 283.4041 198.7445 283.9024 198.1706 C 283.9793 198.0842 284.091 197.9142 284.1824 197.7324 C 284.3109 197.4863 284.3423 197.4007 284.3718 197.2012 C 284.4218 196.8647 284.3932 196.5235 284.2816 196.1388 C 284.0811 195.4547 283.716 194.8605 282.9756 194.018 C 281.9386 192.8375 280.8644 191.87 279.695 191.0595 C 279.1622 190.6933 277.9152 190.0094 277.3788 189.7899 C 275.7509 189.1252 274.1847 188.8614 272.5088 188.9674 C 272.3013 188.9829 270.7433 189.1659 269.0456 189.372 C 267.3459 189.5815 265.7845 189.7625 265.579 189.7747 C 265.0818 189.8079 264.6734 189.7886 264.2687 189.7083 C 263.9802 189.6455 263.8926 189.6175 263.6297 189.4792 C 263.3532 189.3331 263.303 189.2951 263.1467 189.1282 C 262.7639 188.7132 262.6248 188.1728 262.74 187.5357 C 262.8256 187.0438 262.9502 186.6873 263.3004 185.9558 C 265.2627 181.8069 268.4417 177.6523 272.9427 173.3408 C 275.2268 171.1503 277.2905 169.3648 282.0542 165.4576 C 286.282 161.9942 287.9687 160.5729 288.629 159.9212 C 289.3488 159.2136 289.8182 158.4788 290.0162 157.7451 C 290.2798 156.7652 290.066 155.8073 289.4447 155.196 C 289.2498 155.0023 288.783 154.7327 288.5076 154.655 C 287.6487 154.4161 286.5707 154.6192 285.474 155.2219 C 284.7464 155.6227 284.7775 155.6001 279.7853 159.4656 C 277.223 161.4504 275.2618 162.9568 273.7494 164.0998 C 270.9165 166.2486 267.7249 168.5736 266.789 169.179 C 266.0645 169.6448 265.4903 169.7643 264.9001 169.5679 C 264.1361 169.3208 264.0867 168.4533 264.7562 167.2702 C 264.8871 167.0435 265.2252 166.5125 265.5149 166.0889 C 265.7993 165.6667 266.4743 164.6537 267.01 163.8353 C 268.6622 161.3251 269.4513 160.1614 270.2235 159.1052 C 270.6754 158.4866 270.9279 158.1587 275.0011 152.9552 C 278.97 147.8855 278.9963 147.8556 279.7024 146.8514 C 280.8633 145.2078 281.3097 144.3018 281.4294 143.3289 C 281.5318 142.5265 281.3078 141.7973 280.7994 141.2873 C 280.6229 141.1086 280.174 140.8314 279.9132 140.744 Z M 279.9132 140.744" />

    <!-- Brazo Derecho -->
    <path id="arm-right" fill="#f5cba7" d="M 35.8201 125.9428 C 35.2608 126.21 34.7451 126.7 34.4239 127.2673 C 34.0982 127.8479 33.9161 128.6772 33.9019 129.6354 C 33.8835 130.9102 34.3541 137.8733 34.7639 142.4061 C 35.1624 146.7761 35.8607 152.9138 36.1386 154.5095 C 36.4664 156.3669 36.5006 157.3849 36.2547 158.1424 C 36.1025 158.6158 35.8943 158.9102 35.5476 159.1406 C 34.6779 159.7134 33.465 159.2619 32.3188 157.9271 C 31.8385 157.3724 30.5186 155.5706 29.5638 154.1805 C 27.177 150.6911 25.1966 147.1939 23.3227 143.1585 C 22.7808 141.9813 22.5984 141.6177 22.321 141.1259 C 21.7128 140.0635 21.0796 139.3152 20.3276 138.7725 C 19.6187 138.2548 18.633 137.9568 17.662 137.9703 C 17.3721 137.9752 17.2908 137.9888 16.8127 138.121 C 16.3599 138.2423 16.2525 138.2792 16.0704 138.3846 C 15.2044 138.8957 14.705 139.7938 14.7166 140.8179 C 14.7206 141.2253 14.7741 141.5304 14.9537 142.1253 C 15.1899 142.9315 15.5345 143.6439 16.1652 144.6396 C 18.9757 149.0912 20.7506 152.0329 22.8957 155.7974 C 24.4492 158.5314 26.5534 162.3999 26.892 163.1503 C 27.5108 164.5091 27.1818 165.6204 25.9274 166.4175 C 25.198 166.8799 24.1435 167.1705 23.1461 167.1911 C 21.6817 167.2195 19.9941 166.8831 18.3392 166.2306 C 16.7109 165.5871 15.24 164.7762 12.5969 163.062 C 9.6166 161.1308 8.9944 160.7556 8.3247 160.4902 C 7.4232 160.1292 6.7986 160.062 6.0246 160.2371 C 5.5818 160.3355 5.3203 160.446 5.0028 160.6645 C 4.5982 160.9509 4.2996 161.3908 4.2078 161.8481 C 4.1292 162.2493 4.1421 162.4481 4.2583 162.882 C 4.4954 163.7365 5.0355 164.4693 6.1725 165.483 C 7.5884 166.7374 9.3697 167.8616 11.889 169.0832 C 12.4038 169.3294 12.9673 169.5909 15.6448 170.8146 C 18.2945 172.0256 19.9672 172.9402 21.4255 173.9608 C 23.9205 175.7107 25.6892 177.8896 27.4102 181.3391 C 27.871 182.259 28.3622 183.3527 29.1825 185.252 C 30.2575 187.7543 30.7461 188.8083 31.4008 190.0443 C 32.8744 192.8119 34.4796 194.788 36.4185 196.2136 C 37.0134 196.6527 38.0951 197.2485 38.6814 197.4595 L 38.7614 197.4865 L 38.9334 198.2493 C 40.0941 203.4867 41.1667 209.4514 44.0723 226.8306 C 46.3659 240.5522 47.3002 246.0161 48.4797 252.6517 C 50.6307 264.709 52.542 274.3474 54.3829 282.3952 C 55.1365 285.6752 55.5722 287.4672 56.4116 290.6757 C 57.8151 296.0341 58.9788 299.8189 60.2869 303.2819 C 60.4277 303.6567 60.5683 304.0153 60.5931 304.0775 L 60.6443 304.1931 L 75.5029 300.2118 C 87.3695 297.0321 90.3709 296.2198 90.3714 296.1914 C 90.3739 296.1705 90.3037 295.5463 90.2107 294.8069 C 89.5816 289.5767 88.7082 284.5211 87.5499 279.3679 C 87.0667 277.2327 86.8591 276.3825 86.1979 273.8542 C 84.3424 266.7486 82.1697 260.0434 78.972 251.611 C 77.3853 247.4098 76.2407 244.5419 72.5264 235.4189 C 68.831 226.3516 67.4013 222.7513 65.8215 218.5158 C 63.6307 212.6486 62.1885 208.3681 60.4982 202.7388 C 60.1056 201.4246 58.5438 195.6112 58.2661 194.4238 L 58.0906 193.6782 L 58.3339 193.4391 C 59.0434 192.7516 59.7146 191.8155 60.2687 190.7288 C 60.6869 189.905 61.0334 189.1004 61.6553 187.482 C 62.8764 184.3118 64.0189 181.9351 65.6494 179.1608 C 66.4434 177.8076 67.3752 176.3649 68.8896 174.1232 C 70.9098 171.1433 72.4193 169.4569 74.0141 168.3906 C 74.49 168.0689 74.9042 167.8488 75.8377 167.4086 C 77.0918 166.8218 77.5806 166.5331 78.0876 166.0859 C 78.8346 165.4328 79.301 164.4869 79.2475 163.7288 C 79.2409 163.6133 79.1996 163.4141 79.1357 163.2209 C 79.0526 162.956 79.0143 162.8733 78.894 162.7114 C 78.6914 162.4381 78.43 162.217 78.079 162.0239 C 77.4535 161.682 76.7752 161.52 75.6559 161.4478 C 74.0879 161.3463 72.6442 161.4217 71.2442 161.6755 C 70.6085 161.7933 69.2431 162.1915 68.7087 162.4156 C 67.0876 163.0967 65.7936 164.0176 64.6834 165.2776 C 64.5477 165.4353 63.5754 166.6664 62.5207 168.0126 C 61.467 169.3625 60.4909 170.5946 60.3542 170.7485 C 60.026 171.1236 59.7237 171.3987 59.3807 171.6281 C 59.1323 171.7877 59.0506 171.8298 58.7669 171.918 C 58.468 172.0102 58.4056 172.0188 58.1772 172.0113 C 57.613 171.9886 57.1326 171.7048 56.7635 171.1728 C 56.4762 170.7645 56.3122 170.4243 56.0426 169.6594 C 54.4965 165.3381 53.8066 160.1525 53.9406 153.9211 C 54.0067 150.7571 54.2035 148.0353 54.8091 141.904 C 55.3496 136.4655 55.5372 134.2678 55.5434 133.3401 C 55.552 132.3308 55.3643 131.4793 54.9856 130.8205 C 54.479 129.9412 53.6505 129.415 52.7789 129.4221 C 52.5041 129.4229 51.9835 129.5625 51.7338 129.7022 C 50.9575 130.1407 50.3389 131.0465 49.9895 132.2482 C 49.7585 133.0461 49.7645 133.0081 48.9678 139.2715 C 48.5595 142.4867 48.2378 144.9386 47.9766 146.8163 C 47.4929 150.3389 46.8801 154.2398 46.6464 155.3296 C 46.4635 156.1712 46.142 156.6618 45.5857 156.9403 C 44.8708 157.3057 44.2224 156.7272 43.8593 155.4172 C 43.7915 155.1644 43.6552 154.5499 43.5605 154.0455 C 43.463 153.5459 43.224 152.3522 43.0241 151.3948 C 42.4174 148.4515 42.1526 147.0706 41.9517 145.7778 C 41.8338 145.0208 41.7805 144.6105 40.9813 138.0508 C 40.2029 131.6595 40.2004 131.6197 39.9896 130.4104 C 39.6482 128.4273 39.3233 127.471 38.72 126.6985 C 38.225 126.0587 37.551 125.7015 36.8308 125.7003 C 36.5797 125.6988 36.0663 125.8202 35.8201 125.9428 Z M 35.8201 125.9428" />



    <!-- Orejas -->
    <circle cx="52" cy="140" r="10" fill="#f5cba7" id="ear-left" />
    <circle cx="212" cy="140" r="10" fill="#f5cba7" id="ear-right" />

    <!-- Cara -->
    <circle cx="132" cy="140" r="80" fill="#f5cba7" id="face" />
    
    <!-- Pelo -->
    <path id="hair" fill="#2c3e50" d="M60 90 Q125 15 190 90 Q125 38 60 110 Z" />
    
    <!-- Ojos -->
    
    <!-- Boca -->
    <path id="mouth" fill="none" stroke="#d64541" stroke-width="4" d="M90 180 Q130 200 170 180" />
  </svg>
</div>
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script src="{{ url_for('static', filename='js/f_avatar_ojos.js') }}"></script>
  <script src="{{ url_for('static', filename='js/f_avatar_cabello.js') }}"></script>
  <script src="{{ url_for('static', filename='js/f_avatar.js') }}"></script>
  
{% endblock %}
